import{n as t,j as r}from"../shared/utils.min.mjs";function e(e){let{swiper:n,extendParams:o,on:l}=e;function s(t,r){const e=function(){let t,r,e;return(n,o)=>{for(r=-1,t=n.length;t-r>1;)e=t+r>>1,n[e]<=o?r=e:t=e;return t}}();let n,o;return this.x=t,this.y=r,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(o=e(this.x,t),n=o-1,(t-this.x[n])*(this.y[o]-this.y[n])/(this.x[o]-this.x[n])+this.y[n]):0},this}function i(){n.controller.control&&n.controller.spline&&(n.controller.spline=void 0,delete n.controller.spline)}o({controller:{control:void 0,inverse:!1,by:"slide"}}),n.controller={control:void 0},l("beforeInit",(()=>{if("undefined"!=typeof window&&("string"==typeof n.params.controller.control||n.params.controller.control instanceof HTMLElement)){const t=document.querySelector(n.params.controller.control);if(t&&t.swiper)n.controller.control=t.swiper;else if(t){const r=e=>{n.controller.control=e.detail[0],n.update(),t.removeEventListener("init",r)};t.addEventListener("init",r)}}else n.controller.control=n.params.controller.control})),l("update",(()=>{i()})),l("resize",(()=>{i()})),l("observerUpdate",(()=>{i()})),l("setTranslate",((t,r,e)=>{n.controller.control&&!n.controller.control.destroyed&&n.controller.setTranslate(r,e)})),l("setTransition",((t,r,e)=>{n.controller.control&&!n.controller.control.destroyed&&n.controller.setTransition(r,e)})),Object.assign(n.controller,{setTranslate:function(t,r){const e=n.controller.control;let o,l;const i=n.constructor;function a(t){if(t.destroyed)return;const r=n.rtlTranslate?-n.translate:n.translate;"slide"===n.params.controller.by&&(function(t){n.controller.spline=n.params.loop?new s(n.slidesGrid,t.slidesGrid):new s(n.snapGrid,t.snapGrid)}(t),l=-n.controller.spline.interpolate(-r)),l&&"container"!==n.params.controller.by||(o=(t.maxTranslate()-t.minTranslate())/(n.maxTranslate()-n.minTranslate()),!Number.isNaN(o)&&Number.isFinite(o)||(o=1),l=(r-n.minTranslate())*o+t.minTranslate()),n.params.controller.inverse&&(l=t.maxTranslate()-l),t.updateProgress(l),t.setTranslate(l,n),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(e))for(let t=0;t<e.length;t+=1)e[t]!==r&&e[t]instanceof i&&a(e[t]);else e instanceof i&&r!==e&&a(e)},setTransition:function(e,o){const l=n.constructor,s=n.controller.control;let i;function a(o){o.destroyed||(o.setTransition(e,n),0!==e&&(o.transitionStart(),o.params.autoHeight&&t((()=>{o.updateAutoHeight()})),r(o.wrapperEl,(()=>{s&&o.transitionEnd()}))))}if(Array.isArray(s))for(i=0;i<s.length;i+=1)s[i]!==o&&s[i]instanceof l&&a(s[i]);else s instanceof l&&o!==s&&a(s)}})}export{e as default};