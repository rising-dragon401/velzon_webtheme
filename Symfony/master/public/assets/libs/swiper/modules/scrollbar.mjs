import{g as l}from"../shared/ssr-window.esm.mjs";import{h as s,c as r,n as a,b as e}from"../shared/utils.mjs";import{c as t}from"../shared/create-element-if-not-defined.mjs";import{c as o}from"../shared/classes-to-selector.mjs";function n(n){let{swiper:i,extendParams:c,on:p,emit:d}=n;const b=l();let m,u,f,g,y=!1,h=null,v=null;function C(){if(!i.params.scrollbar.el||!i.scrollbar.el)return;const{scrollbar:l,rtlTranslate:s}=i,{dragEl:r,el:a}=l,e=i.params.scrollbar,t=i.params.loop?i.progressLoop:i.progress;let o=u,n=(f-u)*t;s?(n=-n,n>0?(o=u-n,n=0):-n+u>f&&(o=f+n)):n<0?(o=u+n,n=0):n+u>f&&(o=f-n),i.isHorizontal()?(r.style.transform=`translate3d(${n}px, 0, 0)`,r.style.width=`${o}px`):(r.style.transform=`translate3d(0px, ${n}px, 0)`,r.style.height=`${o}px`),e.hide&&(clearTimeout(h),a.style.opacity=1,h=setTimeout((()=>{a.style.opacity=0,a.style.transitionDuration="400ms"}),1e3))}function D(){if(!i.params.scrollbar.el||!i.scrollbar.el)return;const{scrollbar:l}=i,{dragEl:s,el:r}=l;s.style.width="",s.style.height="",f=i.isHorizontal()?r.offsetWidth:r.offsetHeight,g=i.size/(i.virtualSize+i.params.slidesOffsetBefore-(i.params.centeredSlides?i.snapGrid[0]:0)),u="auto"===i.params.scrollbar.dragSize?f*g:parseInt(i.params.scrollbar.dragSize,10),i.isHorizontal()?s.style.width=`${u}px`:s.style.height=`${u}px`,r.style.display=g>=1?"none":"",i.params.scrollbar.hide&&(r.style.opacity=0),i.params.watchOverflow&&i.enabled&&l.el.classList[i.isLocked?"add":"remove"](i.params.scrollbar.lockClass)}function w(l){return i.isHorizontal()?l.clientX:l.clientY}function z(l){const{scrollbar:s,rtlTranslate:r}=i,{el:a}=s;let t;t=(w(l)-e(a)[i.isHorizontal()?"left":"top"]-(null!==m?m:u/2))/(f-u),t=Math.max(Math.min(t,1),0),r&&(t=1-t);const o=i.minTranslate()+(i.maxTranslate()-i.minTranslate())*t;i.updateProgress(o),i.setTranslate(o),i.updateActiveIndex(),i.updateSlidesClasses()}function E(l){const s=i.params.scrollbar,{scrollbar:r,wrapperEl:a}=i,{el:e,dragEl:t}=r;y=!0,m=l.target===t?w(l)-l.target.getBoundingClientRect()[i.isHorizontal()?"left":"top"]:null,l.preventDefault(),l.stopPropagation(),a.style.transitionDuration="100ms",t.style.transitionDuration="100ms",z(l),clearTimeout(v),e.style.transitionDuration="0ms",s.hide&&(e.style.opacity=1),i.params.cssMode&&(i.wrapperEl.style["scroll-snap-type"]="none"),d("scrollbarDragStart",l)}function L(l){const{scrollbar:s,wrapperEl:r}=i,{el:a,dragEl:e}=s;y&&(l.preventDefault?l.preventDefault():l.returnValue=!1,z(l),r.style.transitionDuration="0ms",a.style.transitionDuration="0ms",e.style.transitionDuration="0ms",d("scrollbarDragMove",l))}function T(l){const s=i.params.scrollbar,{scrollbar:r,wrapperEl:e}=i,{el:t}=r;y&&(y=!1,i.params.cssMode&&(i.wrapperEl.style["scroll-snap-type"]="",e.style.transitionDuration=""),s.hide&&(clearTimeout(v),v=a((()=>{t.style.opacity=0,t.style.transitionDuration="400ms"}),1e3)),d("scrollbarDragEnd",l),s.snapOnRelease&&i.slideToClosest())}function S(l){const{scrollbar:s,params:r}=i,a=s.el;if(!a)return;const e=a,t=!!r.passiveListeners&&{passive:!1,capture:!1},o=!!r.passiveListeners&&{passive:!0,capture:!1};if(!e)return;const n="on"===l?"addEventListener":"removeEventListener";e[n]("pointerdown",E,t),b[n]("pointermove",L,t),b[n]("pointerup",T,o)}function x(){const{scrollbar:l,el:a}=i;i.params.scrollbar=t(i,i.originalParams.scrollbar,i.params.scrollbar,{el:"swiper-scrollbar"});const e=i.params.scrollbar;if(!e.el)return;let n,c;if("string"==typeof e.el&&i.isElement&&(n=i.el.querySelector(e.el)),n||"string"!=typeof e.el)n||(n=e.el);else if(n=b.querySelectorAll(e.el),!n.length)return;i.params.uniqueNavElements&&"string"==typeof e.el&&n.length>1&&1===a.querySelectorAll(e.el).length&&(n=a.querySelector(e.el)),n.length>0&&(n=n[0]),n.classList.add(i.isHorizontal()?e.horizontalClass:e.verticalClass),n&&(c=n.querySelector(o(i.params.scrollbar.dragClass)),c||(c=r("div",i.params.scrollbar.dragClass),n.append(c))),Object.assign(l,{el:n,dragEl:c}),e.draggable&&i.params.scrollbar.el&&i.scrollbar.el&&S("on"),n&&n.classList[i.enabled?"remove":"add"](...s(i.params.scrollbar.lockClass))}function H(){const l=i.params.scrollbar,r=i.scrollbar.el;r&&r.classList.remove(...s(i.isHorizontal()?l.horizontalClass:l.verticalClass)),i.params.scrollbar.el&&i.scrollbar.el&&S("off")}c({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),i.scrollbar={el:null,dragEl:null},p("init",(()=>{!1===i.params.scrollbar.enabled?k():(x(),D(),C())})),p("update resize observerUpdate lock unlock",(()=>{D()})),p("setTranslate",(()=>{C()})),p("setTransition",((l,s)=>{!function(l){i.params.scrollbar.el&&i.scrollbar.el&&(i.scrollbar.dragEl.style.transitionDuration=`${l}ms`)}(s)})),p("enable disable",(()=>{const{el:l}=i.scrollbar;l&&l.classList[i.enabled?"remove":"add"](...s(i.params.scrollbar.lockClass))})),p("destroy",(()=>{H()}));const k=()=>{i.el.classList.add(...s(i.params.scrollbar.scrollbarDisabledClass)),i.scrollbar.el&&i.scrollbar.el.classList.add(...s(i.params.scrollbar.scrollbarDisabledClass)),H()};Object.assign(i.scrollbar,{enable:()=>{i.el.classList.remove(...s(i.params.scrollbar.scrollbarDisabledClass)),i.scrollbar.el&&i.scrollbar.el.classList.remove(...s(i.params.scrollbar.scrollbarDisabledClass)),x(),D(),C()},disable:k,updateSize:D,setTranslate:C,init:x,destroy:H})}export{n as default};