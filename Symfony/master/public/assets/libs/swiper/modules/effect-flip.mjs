import{c as e}from"../shared/create-shadow.mjs";import{e as s}from"../shared/effect-init.mjs";import{e as t}from"../shared/effect-target.mjs";import{e as r}from"../shared/effect-virtual-transition-end.mjs";import{l as a}from"../shared/utils.mjs";function i(i){let{swiper:o,extendParams:l,on:p}=i;l({flipEffect:{slideShadows:!0,limitRotation:!0}});const f=(s,t)=>{let r=o.isHorizontal()?s.querySelector(".swiper-slide-shadow-left"):s.querySelector(".swiper-slide-shadow-top"),a=o.isHorizontal()?s.querySelector(".swiper-slide-shadow-right"):s.querySelector(".swiper-slide-shadow-bottom");r||(r=e("flip",s,o.isHorizontal()?"left":"top")),a||(a=e("flip",s,o.isHorizontal()?"right":"bottom")),r&&(r.style.opacity=Math.max(-t,0)),a&&(a.style.opacity=Math.max(t,0))};s({effect:"flip",swiper:o,on:p,setTranslate:()=>{const{slides:e,rtlTranslate:s}=o,r=o.params.flipEffect;for(let a=0;a<e.length;a+=1){const i=e[a];let l=i.progress;o.params.flipEffect.limitRotation&&(l=Math.max(Math.min(i.progress,1),-1));const p=i.swiperSlideOffset;let n=-180*l,d=0,m=o.params.cssMode?-p-o.translate:-p,c=0;o.isHorizontal()?s&&(n=-n):(c=m,m=0,d=-n,n=0),o.browser&&o.browser.isSafari&&(Math.abs(n)/90%2==1&&(n+=.001),Math.abs(d)/90%2==1&&(d+=.001)),i.style.zIndex=-Math.abs(Math.round(l))+e.length,r.slideShadows&&f(i,l);const h=`translate3d(${m}px, ${c}px, 0px) rotateX(${d}deg) rotateY(${n}deg)`;t(r,i).style.transform=h}},setTransition:e=>{const s=o.slides.map((e=>a(e)));s.forEach((s=>{s.style.transitionDuration=`${e}ms`,s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((s=>{s.style.transitionDuration=`${e}ms`}))})),r({swiper:o,duration:e,transformElements:s})},recreateShadows:()=>{o.params.flipEffect,o.slides.forEach((e=>{let s=e.progress;o.params.flipEffect.limitRotation&&(s=Math.max(Math.min(e.progress,1),-1)),f(e,s)}))},getEffectParams:()=>o.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!o.params.cssMode})})}export{i as default};