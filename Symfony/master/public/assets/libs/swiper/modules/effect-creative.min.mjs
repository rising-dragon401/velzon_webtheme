import{c as e}from"../shared/create-shadow.min.mjs";import{e as s}from"../shared/effect-init.min.mjs";import{e as t}from"../shared/effect-target.min.mjs";import{e as r}from"../shared/effect-virtual-transition-end.min.mjs";import{l as a}from"../shared/utils.min.mjs";function i(i){let{swiper:o,extendParams:l,on:n}=i;l({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const c=e=>"string"==typeof e?e:`${e}px`;s({effect:"creative",swiper:o,on:n,setTranslate:()=>{const{slides:s,wrapperEl:r,slidesSizesGrid:a}=o,i=o.params.creativeEffect,{progressMultiplier:l}=i,n=o.params.centeredSlides;if(n){const e=a[0]/2-o.params.slidesOffsetBefore||0;r.style.transform=`translateX(calc(50% - ${e}px))`}for(let r=0;r<s.length;r+=1){const a=s[r],m=a.progress,p=Math.min(Math.max(a.progress,-i.limitProgress),i.limitProgress);let f=p;n||(f=Math.min(Math.max(a.originalProgress,-i.limitProgress),i.limitProgress));const d=a.swiperSlideOffset,h=[o.params.cssMode?-d-o.translate:-d,0,0],g=[0,0,0];let w=!1;o.isHorizontal()||(h[1]=h[0],h[0]=0);let y={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};p<0?(y=i.next,w=!0):p>0&&(y=i.prev,w=!0),h.forEach(((e,s)=>{h[s]=`calc(${e}px + (${c(y.translate[s])} * ${Math.abs(p*l)}))`})),g.forEach(((e,s)=>{let t=y.rotate[s]*Math.abs(p*l);o.browser&&o.browser.isSafari&&Math.abs(t)/90%2==1&&(t+=.001),g[s]=t})),a.style.zIndex=-Math.abs(Math.round(m))+s.length;const M=h.join(", "),$=`rotateX(${g[0]}deg) rotateY(${g[1]}deg) rotateZ(${g[2]}deg)`,P=f<0?`scale(${1+(1-y.scale)*f*l})`:`scale(${1-(1-y.scale)*f*l})`,u=f<0?1+(1-y.opacity)*f*l:1-(1-y.opacity)*f*l,v=`translate3d(${M}) ${$} ${P}`;if(w&&y.shadow||!w){let s=a.querySelector(".swiper-slide-shadow");if(!s&&y.shadow&&(s=e("creative",a)),s){const e=i.shadowPerProgress?p*(1/i.limitProgress):p;s.style.opacity=Math.min(Math.max(Math.abs(e),0),1)}}const x=t(i,a);x.style.transform=v,x.style.opacity=u,y.origin&&(x.style.transformOrigin=y.origin)}},setTransition:e=>{const s=o.slides.map((e=>a(e)));s.forEach((s=>{s.style.transitionDuration=`${e}ms`,s.querySelectorAll(".swiper-slide-shadow").forEach((s=>{s.style.transitionDuration=`${e}ms`}))})),r({swiper:o,duration:e,transformElements:s,allSlides:!0})},perspective:()=>o.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!o.params.cssMode})})}export{i as default};