import{c as a}from"../shared/classes-to-selector.min.mjs";import{c as e}from"../shared/create-element-if-not-defined.min.mjs";import{f as s,g as l,a as t}from"../shared/utils.min.mjs";function i(i){let{swiper:n,extendParams:r,on:o,emit:p}=i;const c="swiper-pagination";let d;r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`,paginationDisabledClass:`${c}-disabled`}}),n.pagination={el:null,bullets:[]};let u=0;const g=a=>(Array.isArray(a)?a:[a]).filter((a=>!!a));function m(){return!n.params.pagination.el||!n.pagination.el||Array.isArray(n.pagination.el)&&0===n.pagination.el.length}function b(a,e){const{bulletActiveClass:s}=n.params.pagination;a&&(a=a[("prev"===e?"previous":"next")+"ElementSibling"])&&(a.classList.add(`${s}-${e}`),(a=a[("prev"===e?"previous":"next")+"ElementSibling"])&&a.classList.add(`${s}-${e}-${e}`))}function f(e){const s=e.target.closest(a(n.params.pagination.bulletClass));if(!s)return;e.preventDefault();const t=l(s)*n.params.slidesPerGroup;if(n.params.loop){if(n.realIndex===t)return;n.slideToLoop(t)}else n.slideTo(t)}function h(){const e=n.rtl,t=n.params.pagination;if(m())return;let i,r,o=n.pagination.el;o=g(o);const c=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,f=n.params.loop?Math.ceil(c/n.params.slidesPerGroup):n.snapGrid.length;if(n.params.loop?(r=n.previousRealIndex||0,i=n.params.slidesPerGroup>1?Math.floor(n.realIndex/n.params.slidesPerGroup):n.realIndex):void 0!==n.snapIndex?(i=n.snapIndex,r=n.previousSnapIndex):(r=n.previousIndex||0,i=n.activeIndex||0),"bullets"===t.type&&n.pagination.bullets&&n.pagination.bullets.length>0){const a=n.pagination.bullets;let p,c,g;if(t.dynamicBullets&&(d=s(a[0],n.isHorizontal()?"width":"height",!0),o.forEach((a=>{a.style[n.isHorizontal()?"width":"height"]=d*(t.dynamicMainBullets+4)+"px"})),t.dynamicMainBullets>1&&void 0!==r&&(u+=i-(r||0),u>t.dynamicMainBullets-1?u=t.dynamicMainBullets-1:u<0&&(u=0)),p=Math.max(i-u,0),c=p+(Math.min(a.length,t.dynamicMainBullets)-1),g=(c+p)/2),a.forEach((a=>{const e=[...["","-next","-next-next","-prev","-prev-prev","-main"].map((a=>`${t.bulletActiveClass}${a}`))].map((a=>"string"==typeof a&&a.includes(" ")?a.split(" "):a)).flat();a.classList.remove(...e)})),o.length>1)a.forEach((a=>{const e=l(a);e===i?a.classList.add(...t.bulletActiveClass.split(" ")):n.isElement&&a.setAttribute("part","bullet"),t.dynamicBullets&&(e>=p&&e<=c&&a.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),e===p&&b(a,"prev"),e===c&&b(a,"next"))}));else{const e=a[i];if(e&&e.classList.add(...t.bulletActiveClass.split(" ")),n.isElement&&a.forEach(((a,e)=>{a.setAttribute("part",e===i?"bullet-active":"bullet")})),t.dynamicBullets){const e=a[p],s=a[c];for(let e=p;e<=c;e+=1)a[e]&&a[e].classList.add(...`${t.bulletActiveClass}-main`.split(" "));b(e,"prev"),b(s,"next")}}if(t.dynamicBullets){const s=Math.min(a.length,t.dynamicMainBullets+4),l=(d*s-d)/2-g*d,i=e?"right":"left";a.forEach((a=>{a.style[n.isHorizontal()?i:"top"]=`${l}px`}))}}o.forEach(((e,s)=>{if("fraction"===t.type&&(e.querySelectorAll(a(t.currentClass)).forEach((a=>{a.textContent=t.formatFractionCurrent(i+1)})),e.querySelectorAll(a(t.totalClass)).forEach((a=>{a.textContent=t.formatFractionTotal(f)}))),"progressbar"===t.type){let s;s=t.progressbarOpposite?n.isHorizontal()?"vertical":"horizontal":n.isHorizontal()?"horizontal":"vertical";const l=(i+1)/f;let r=1,o=1;"horizontal"===s?r=l:o=l,e.querySelectorAll(a(t.progressbarFillClass)).forEach((a=>{a.style.transform=`translate3d(0,0,0) scaleX(${r}) scaleY(${o})`,a.style.transitionDuration=`${n.params.speed}ms`}))}"custom"===t.type&&t.renderCustom?(e.innerHTML=t.renderCustom(n,i+1,f),0===s&&p("paginationRender",e)):(0===s&&p("paginationRender",e),p("paginationUpdate",e)),n.params.watchOverflow&&n.enabled&&e.classList[n.isLocked?"add":"remove"](t.lockClass)}))}function C(){const e=n.params.pagination;if(m())return;const s=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.grid&&n.params.grid.rows>1?n.slides.length/Math.ceil(n.params.grid.rows):n.slides.length;let l=n.pagination.el;l=g(l);let t="";if("bullets"===e.type){let a=n.params.loop?Math.ceil(s/n.params.slidesPerGroup):n.snapGrid.length;n.params.freeMode&&n.params.freeMode.enabled&&a>s&&(a=s);for(let s=0;s<a;s+=1)e.renderBullet?t+=e.renderBullet.call(n,s,e.bulletClass):t+=`<${e.bulletElement} ${n.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(t=e.renderFraction?e.renderFraction.call(n,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(t=e.renderProgressbar?e.renderProgressbar.call(n,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),n.pagination.bullets=[],l.forEach((s=>{"custom"!==e.type&&(s.innerHTML=t||""),"bullets"===e.type&&n.pagination.bullets.push(...s.querySelectorAll(a(e.bulletClass)))})),"custom"!==e.type&&p("paginationRender",l[0])}function v(){n.params.pagination=e(n,n.originalParams.pagination,n.params.pagination,{el:"swiper-pagination"});const a=n.params.pagination;if(!a.el)return;let s;"string"==typeof a.el&&n.isElement&&(s=n.el.querySelector(a.el)),s||"string"!=typeof a.el||(s=[...document.querySelectorAll(a.el)]),s||(s=a.el),s&&0!==s.length&&(n.params.uniqueNavElements&&"string"==typeof a.el&&Array.isArray(s)&&s.length>1&&(s=[...n.el.querySelectorAll(a.el)],s.length>1&&(s=s.filter((a=>t(a,".swiper")[0]===n.el))[0])),Array.isArray(s)&&1===s.length&&(s=s[0]),Object.assign(n.pagination,{el:s}),s=g(s),s.forEach((e=>{"bullets"===a.type&&a.clickable&&e.classList.add(...(a.clickableClass||"").split(" ")),e.classList.add(a.modifierClass+a.type),e.classList.add(n.isHorizontal()?a.horizontalClass:a.verticalClass),"bullets"===a.type&&a.dynamicBullets&&(e.classList.add(`${a.modifierClass}${a.type}-dynamic`),u=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),"progressbar"===a.type&&a.progressbarOpposite&&e.classList.add(a.progressbarOppositeClass),a.clickable&&e.addEventListener("click",f),n.enabled||e.classList.add(a.lockClass)})))}function y(){const a=n.params.pagination;if(m())return;let e=n.pagination.el;e&&(e=g(e),e.forEach((e=>{e.classList.remove(a.hiddenClass),e.classList.remove(a.modifierClass+a.type),e.classList.remove(n.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&(e.classList.remove(...(a.clickableClass||"").split(" ")),e.removeEventListener("click",f))}))),n.pagination.bullets&&n.pagination.bullets.forEach((e=>e.classList.remove(...a.bulletActiveClass.split(" "))))}o("changeDirection",(()=>{if(!n.pagination||!n.pagination.el)return;const a=n.params.pagination;let{el:e}=n.pagination;e=g(e),e.forEach((e=>{e.classList.remove(a.horizontalClass,a.verticalClass),e.classList.add(n.isHorizontal()?a.horizontalClass:a.verticalClass)}))})),o("init",(()=>{!1===n.params.pagination.enabled?L():(v(),C(),h())})),o("activeIndexChange",(()=>{void 0===n.snapIndex&&h()})),o("snapIndexChange",(()=>{h()})),o("snapGridLengthChange",(()=>{C(),h()})),o("destroy",(()=>{y()})),o("enable disable",(()=>{let{el:a}=n.pagination;a&&(a=g(a),a.forEach((a=>a.classList[n.enabled?"remove":"add"](n.params.pagination.lockClass))))})),o("lock unlock",(()=>{h()})),o("click",((a,e)=>{const s=e.target,l=g(n.pagination.el);if(n.params.pagination.el&&n.params.pagination.hideOnClick&&l&&l.length>0&&!s.classList.contains(n.params.pagination.bulletClass)){if(n.navigation&&(n.navigation.nextEl&&s===n.navigation.nextEl||n.navigation.prevEl&&s===n.navigation.prevEl))return;const a=l[0].classList.contains(n.params.pagination.hiddenClass);p(!0===a?"paginationShow":"paginationHide"),l.forEach((a=>a.classList.toggle(n.params.pagination.hiddenClass)))}}));const L=()=>{n.el.classList.add(n.params.pagination.paginationDisabledClass);let{el:a}=n.pagination;a&&(a=g(a),a.forEach((a=>a.classList.add(n.params.pagination.paginationDisabledClass)))),y()};Object.assign(n.pagination,{enable:()=>{n.el.classList.remove(n.params.pagination.paginationDisabledClass);let{el:a}=n.pagination;a&&(a=g(a),a.forEach((a=>a.classList.remove(n.params.pagination.paginationDisabledClass)))),v(),C(),h()},disable:L,render:C,update:h,init:v,destroy:y})}export{i as default};