import{e}from"../shared/effect-init.mjs";import{c as s}from"../shared/utils.mjs";function t(t){let{swiper:a,extendParams:r,on:o}=t;r({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const i=(e,t,a)=>{let r=a?e.querySelector(".swiper-slide-shadow-left"):e.querySelector(".swiper-slide-shadow-top"),o=a?e.querySelector(".swiper-slide-shadow-right"):e.querySelector(".swiper-slide-shadow-bottom");r||(r=s("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(a?"left":"top")).split(" ")),e.append(r)),o||(o=s("div",("swiper-slide-shadow-cube swiper-slide-shadow-"+(a?"right":"bottom")).split(" ")),e.append(o)),r&&(r.style.opacity=Math.max(-t,0)),o&&(o.style.opacity=Math.max(t,0))};e({effect:"cube",swiper:a,on:o,setTranslate:()=>{const{el:e,wrapperEl:t,slides:r,width:o,height:l,rtlTranslate:d,size:p,browser:w}=a,n=a.params.cubeEffect,h=a.isHorizontal(),c=a.virtual&&a.params.virtual.enabled;let f,u=0;n.shadow&&(h?(f=a.wrapperEl.querySelector(".swiper-cube-shadow"),f||(f=s("div","swiper-cube-shadow"),a.wrapperEl.append(f)),f.style.height=`${o}px`):(f=e.querySelector(".swiper-cube-shadow"),f||(f=s("div","swiper-cube-shadow"),e.append(f))));for(let e=0;e<r.length;e+=1){const s=r[e];let t=e;c&&(t=parseInt(s.getAttribute("data-swiper-slide-index"),10));let o=90*t,l=Math.floor(o/360);d&&(o=-o,l=Math.floor(-o/360));const w=Math.max(Math.min(s.progress,1),-1);let f=0,m=0,b=0;t%4==0?(f=4*-l*p,b=0):(t-1)%4==0?(f=0,b=4*-l*p):(t-2)%4==0?(f=p+4*l*p,b=p):(t-3)%4==0&&(f=-p,b=3*p+4*p*l),d&&(f=-f),h||(m=f,f=0);const y=`rotateX(${h?0:-o}deg) rotateY(${h?o:0}deg) translate3d(${f}px, ${m}px, ${b}px)`;w<=1&&w>-1&&(u=90*t+90*w,d&&(u=90*-t-90*w),a.browser&&a.browser.isSafari&&Math.abs(u)/90%2==1&&(u+=.001)),s.style.transform=y,n.slideShadows&&i(s,w,h)}if(t.style.transformOrigin=`50% 50% -${p/2}px`,t.style["-webkit-transform-origin"]=`50% 50% -${p/2}px`,n.shadow)if(h)f.style.transform=`translate3d(0px, ${o/2+n.shadowOffset}px, ${-o/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${n.shadowScale})`;else{const e=Math.abs(u)-90*Math.floor(Math.abs(u)/90),s=1.5-(Math.sin(2*e*Math.PI/360)/2+Math.cos(2*e*Math.PI/360)/2),t=n.shadowScale,a=n.shadowScale/s,r=n.shadowOffset;f.style.transform=`scale3d(${t}, 1, ${a}) translate3d(0px, ${l/2+r}px, ${-l/2/a}px) rotateX(-89.99deg)`}const m=(w.isSafari||w.isWebView)&&w.needPerspectiveFix?-p/2:0;t.style.transform=`translate3d(0px,0,${m}px) rotateX(${a.isHorizontal()?0:u}deg) rotateY(${a.isHorizontal()?-u:0}deg)`,t.style.setProperty("--swiper-cube-translate-z",`${m}px`)},setTransition:e=>{const{el:s,slides:t}=a;if(t.forEach((s=>{s.style.transitionDuration=`${e}ms`,s.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((s=>{s.style.transitionDuration=`${e}ms`}))})),a.params.cubeEffect.shadow&&!a.isHorizontal()){const t=s.querySelector(".swiper-cube-shadow");t&&(t.style.transitionDuration=`${e}ms`)}},recreateShadows:()=>{const e=a.isHorizontal();a.slides.forEach((s=>{const t=Math.max(Math.min(s.progress,1),-1);i(s,t,e)}))},getEffectParams:()=>a.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}export{t as default};