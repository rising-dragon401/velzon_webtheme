import{getEventTarget}from"../../utils/dom";function weekSelectPlugin(){return function(e){function t(t){var a=getEventTarget(t);if(a.classList.contains("flatpickr-day"))for(var n=e.days.childNodes,o=a.$i/7,i=n[7*Math.floor(o)].dateObj,d=n[7*Math.ceil(o+.01)-1].dateObj,r=n.length;r--;){var s=n[r],l=s.dateObj;l>d||l<i?s.classList.remove("inRange"):s.classList.add("inRange")}}function a(){var t=e.latestSelectedDateObj;void 0!==t&&t.getMonth()===e.currentMonth&&t.getFullYear()===e.currentYear&&(e.weekStartDay=e.days.childNodes[7*Math.floor(e.selectedDateElem.$i/7)].dateObj,e.weekEndDay=e.days.childNodes[7*Math.ceil(e.selectedDateElem.$i/7+.01)-1].dateObj);for(var a=e.days.childNodes,n=a.length;n--;){var o=a[n].dateObj;o>=e.weekStartDay&&o<=e.weekEndDay&&a[n].classList.add("week","selected")}}return{onValueUpdate:a,onMonthChange:a,onYearChange:a,onOpen:a,onClose:function(){for(var t=e.days.childNodes,a=t.length;a--;)t[a].classList.remove("inRange")},onParseConfig:function(){e.config.mode="single",e.config.enableTime=!1,e.config.dateFormat=e.config.dateFormat?e.config.dateFormat:"\\W\\e\\e\\k #W, Y",e.config.altFormat=e.config.altFormat?e.config.altFormat:"\\W\\e\\e\\k #W, Y"},onReady:[function(){void 0!==e.daysContainer&&e.daysContainer.addEventListener("mouseover",t)},a,function(){e.loadedPlugins.push("weekSelect")}],onDestroy:function(){void 0!==e.daysContainer&&e.daysContainer.removeEventListener("mouseover",t)}}}}export default weekSelectPlugin;