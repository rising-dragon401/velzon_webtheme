import{tokenRegex,revFormat,formats}from"./formatting";import{defaults}from"../types/options";import{english}from"../l10n/default";export var createDateFormatter=function(e){var t=e.config,r=void 0===t?defaults:t,n=e.l10n,a=void 0===n?english:n,o=e.isMobile,i=void 0!==o&&o;return function(e,t,n){var o=n||a;return void 0===r.formatDate||i?t.split("").map((function(t,n,a){return formats[t]&&"\\"!==a[n-1]?formats[t](e,o,r):"\\"!==t?t:""})).join(""):r.formatDate(e,t,o)}};export var createDateParser=function(e){var t=e.config,r=void 0===t?defaults:t,n=e.l10n,a=void 0===n?english:n;return function(e,t,n,o){if(0===e||e){var i,s=o||a,u=e;if(e instanceof Date)i=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)i=new Date(e);else if("string"==typeof e){var f=t||(r||defaults).dateFormat,m=String(e).trim();if("today"===m)i=new Date,n=!0;else if(r&&r.parseDate)i=r.parseDate(e,f);else if(/Z$/.test(m)||/GMT$/.test(m))i=new Date(e);else{for(var d=void 0,v=[],g=0,c=0,l="";g<f.length;g++){var D=f[g],p="\\"===D,x="\\"===f[g-1]||p;if(tokenRegex[D]&&!x){l+=tokenRegex[D];var h=new RegExp(l).exec(e);h&&(d=!0)&&v["Y"!==D?"push":"unshift"]({fn:revFormat[D],val:h[++c]})}else p||(l+=".")}i=r&&r.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),v.forEach((function(e){var t=e.fn,r=e.val;return i=t(i,r,s)||i})),i=d?i:void 0}}if(i instanceof Date&&!isNaN(i.getTime()))return!0===n&&i.setHours(0,0,0,0),i;r.errorHandler(new Error("Invalid date provided: "+u))}}};export function compareDates(e,t,r){return void 0===r&&(r=!0),!1!==r?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}export function compareTimes(e,t){return 3600*(e.getHours()-t.getHours())+60*(e.getMinutes()-t.getMinutes())+e.getSeconds()-t.getSeconds()}export var isBetween=function(e,t,r){return e>Math.min(t,r)&&e<Math.max(t,r)};export var calculateSecondsSinceMidnight=function(e,t,r){return 3600*e+60*t+r};export var parseSeconds=function(e){var t=Math.floor(e/3600),r=(e-3600*t)/60;return[t,r,e-3600*t-60*r]};export var duration={DAY:864e5};export function getDefaultHours(e){var t=e.defaultHour,r=e.defaultMinute,n=e.defaultSeconds;if(void 0!==e.minDate){var a=e.minDate.getHours(),o=e.minDate.getMinutes(),i=e.minDate.getSeconds();t<a&&(t=a),t===a&&r<o&&(r=o),t===a&&r===o&&n<i&&(n=e.minDate.getSeconds())}if(void 0!==e.maxDate){var s=e.maxDate.getHours(),u=e.maxDate.getMinutes();(t=Math.min(t,s))===s&&(r=Math.min(u,r)),t===s&&r===u&&(n=e.maxDate.getSeconds())}return{hours:t,minutes:r,seconds:n}}