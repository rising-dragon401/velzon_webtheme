function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_extends.apply(this,arguments)}import React,{useRef,useState,useEffect,forwardRef}from"react";import SwiperCore from"swiper";import{getParams}from"../components-shared/get-params.js";import{mountSwiper}from"../components-shared/mount-swiper.js";import{needsScrollbar,needsNavigation,needsPagination,uniqueClasses,extend,wrapperClass}from"../components-shared/utils.js";import{getChangedParams}from"../components-shared/get-changed-params.js";import{getChildren}from"./get-children.js";import{updateSwiper}from"../components-shared/update-swiper.js";import{renderVirtual}from"./virtual.js";import{updateOnVirtualData}from"../components-shared/update-on-virtual-data.js";import{useIsomorphicLayoutEffect}from"./use-isomorphic-layout-effect.js";import{SwiperContext}from"./context.js";const Swiper=forwardRef((function(e,r){let{className:t,tag:n="div",wrapperTag:a="div",children:s,onSwiper:c,...u}=void 0===e?{}:e,o=!1;const[i,l]=useState("swiper"),[p,d]=useState(null),[m,f]=useState(!1),w=useRef(!1),g=useRef(null),E=useRef(null),h=useRef(null),v=useRef(null),R=useRef(null),S=useRef(null),b=useRef(null),j=useRef(null),{params:x,passedParams:y,rest:C,events:P}=getParams(u),{slides:N,slots:O}=getChildren(s),_=()=>{f(!m)};Object.assign(x.on,{_containerClasses(e,r){l(r)}});const k=()=>{Object.assign(x.on,P),o=!0;const e={...x};if(delete e.wrapperClass,E.current=new SwiperCore(e),E.current.virtual&&E.current.params.virtual.enabled){E.current.virtual.slides=N;const e={cache:!1,slides:N,renderExternal:d,renderExternalUpdate:!1};extend(E.current.params.virtual,e),extend(E.current.originalParams.virtual,e)}};g.current||k(),E.current&&E.current.on("_beforeBreakpoint",_);return useEffect((()=>()=>{E.current&&E.current.off("_beforeBreakpoint",_)})),useEffect((()=>{!w.current&&E.current&&(E.current.emitSlidesClasses(),w.current=!0)})),useIsomorphicLayoutEffect((()=>{if(r&&(r.current=g.current),g.current)return E.current.destroyed&&k(),mountSwiper({el:g.current,nextEl:R.current,prevEl:S.current,paginationEl:b.current,scrollbarEl:j.current,swiper:E.current},x),c&&c(E.current),()=>{E.current&&!E.current.destroyed&&E.current.destroy(!0,!1)}}),[]),useIsomorphicLayoutEffect((()=>{!o&&P&&E.current&&Object.keys(P).forEach((e=>{E.current.on(e,P[e])}));const e=getChangedParams(y,h.current,N,v.current,(e=>e.key));return h.current=y,v.current=N,e.length&&E.current&&!E.current.destroyed&&updateSwiper({swiper:E.current,slides:N,passedParams:y,changedParams:e,nextEl:R.current,prevEl:S.current,scrollbarEl:j.current,paginationEl:b.current}),()=>{P&&E.current&&Object.keys(P).forEach((e=>{E.current.off(e,P[e])}))}})),useIsomorphicLayoutEffect((()=>{updateOnVirtualData(E.current)}),[p]),React.createElement(n,_extends({ref:g,className:uniqueClasses(`${i}${t?` ${t}`:""}`)},C),React.createElement(SwiperContext.Provider,{value:E.current},O["container-start"],React.createElement(a,{className:wrapperClass(x.wrapperClass)},O["wrapper-start"],x.virtual?renderVirtual(E.current,N,p):N.map(((e,r)=>React.cloneElement(e,{swiper:E.current,swiperSlideIndex:r}))),O["wrapper-end"]),needsNavigation(x)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:S,className:"swiper-button-prev"}),React.createElement("div",{ref:R,className:"swiper-button-next"})),needsScrollbar(x)&&React.createElement("div",{ref:j,className:"swiper-scrollbar"}),needsPagination(x)&&React.createElement("div",{ref:b,className:"swiper-pagination"}),O["container-end"]))}));Swiper.displayName="Swiper";export{Swiper};