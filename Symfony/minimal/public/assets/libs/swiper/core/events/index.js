import{getDocument}from"ssr-window";import onTouchStart from"./onTouchStart.js";import onTouchMove from"./onTouchMove.js";import onTouchEnd from"./onTouchEnd.js";import onResize from"./onResize.js";import onClick from"./onClick.js";import onScroll from"./onScroll.js";import onLoad from"./onLoad.js";let dummyEventAttached=!1;function dummyEventListener(){}const events=(o,e)=>{const n=getDocument(),{params:t,el:s,wrapperEl:r,device:c}=o,i=!!t.nested,a="on"===e?"addEventListener":"removeEventListener",d=e;s[a]("pointerdown",o.onTouchStart,{passive:!1}),n[a]("pointermove",o.onTouchMove,{passive:!1,capture:i}),n[a]("pointerup",o.onTouchEnd,{passive:!0}),n[a]("pointercancel",o.onTouchEnd,{passive:!0}),n[a]("pointerout",o.onTouchEnd,{passive:!0}),n[a]("pointerleave",o.onTouchEnd,{passive:!0}),(t.preventClicks||t.preventClicksPropagation)&&s[a]("click",o.onClick,!0),t.cssMode&&r[a]("scroll",o.onScroll),t.updateOnWindowResize?o[d](c.ios||c.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):o[d]("observerUpdate",onResize,!0),s[a]("load",o.onLoad,{capture:!0})};function attachEvents(){const o=this,e=getDocument(),{params:n}=o;o.onTouchStart=onTouchStart.bind(o),o.onTouchMove=onTouchMove.bind(o),o.onTouchEnd=onTouchEnd.bind(o),n.cssMode&&(o.onScroll=onScroll.bind(o)),o.onClick=onClick.bind(o),o.onLoad=onLoad.bind(o),dummyEventAttached||(e.addEventListener("touchstart",dummyEventListener),dummyEventAttached=!0),events(o,"on")}function detachEvents(){events(this,"off")}export default{attachEvents,detachEvents};