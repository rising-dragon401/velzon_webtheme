import{getWindow}from"ssr-window";import{elementParents}from"../../../shared/utils.js";export default function Observer({swiper:e,extendParams:t,on:r,emit:i}){const s=[],a=getWindow(),n=(t,r={})=>{const n=new(a.MutationObserver||a.WebkitMutationObserver)((t=>{if(e.__preventObserver__)return;if(1===t.length)return void i("observerUpdate",t[0]);const r=function(){i("observerUpdate",t[0])};a.requestAnimationFrame?a.requestAnimationFrame(r):a.setTimeout(r,0)}));n.observe(t,{attributes:void 0===r.attributes||r.attributes,childList:void 0===r.childList||r.childList,characterData:void 0===r.characterData||r.characterData}),s.push(n)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",(()=>{if(e.params.observer){if(e.params.observeParents){const t=elementParents(e.el);for(let e=0;e<t.length;e+=1)n(t[e])}n(e.el,{childList:e.params.observeSlideChildren}),n(e.wrapperEl,{attributes:!1})}})),r("destroy",(()=>{s.forEach((e=>{e.disconnect()})),s.splice(0,s.length)}))}