import{animateCSSModeScroll}from"../../shared/utils.js";export default function slideTo(e=0,t=this.params.speed,r=!0,i,n){"string"==typeof e&&(e=parseInt(e,10));const a=this;let s=e;s<0&&(s=0);const{params:o,snapGrid:l,slidesGrid:d,previousIndex:p,activeIndex:u,rtlTranslate:m,wrapperEl:S,enabled:c}=a;if(a.animating&&o.preventInteractionOnTransition||!c&&!i&&!n)return!1;const f=Math.min(a.params.slidesPerGroupSkip,s);let T=f+Math.floor((s-f)/a.params.slidesPerGroup);T>=l.length&&(T=l.length-1);const h=-l[T];if(o.normalizeSlideIndex)for(let e=0;e<d.length;e+=1){const t=-Math.floor(100*h),r=Math.floor(100*d[e]),i=Math.floor(100*d[e+1]);void 0!==d[e+1]?t>=r&&t<i-(i-r)/2?s=e:t>=r&&t<i&&(s=e+1):t>=r&&(s=e)}if(a.initialized&&s!==u){if(!a.allowSlideNext&&h<a.translate&&h<a.minTranslate())return!1;if(!a.allowSlidePrev&&h>a.translate&&h>a.maxTranslate()&&(u||0)!==s)return!1}let E;if(s!==(p||0)&&r&&a.emit("beforeSlideChangeStart"),a.updateProgress(h),E=s>u?"next":s<u?"prev":"reset",m&&-h===a.translate||!m&&h===a.translate)return a.updateActiveIndex(s),o.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==o.effect&&a.setTranslate(h),"reset"!==E&&(a.transitionStart(r,E),a.transitionEnd(r,E)),!1;if(o.cssMode){const e=a.isHorizontal(),r=m?h:-h;if(0===t){const t=a.virtual&&a.params.virtual.enabled;t&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),t&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{S[e?"scrollLeft":"scrollTop"]=r}))):S[e?"scrollLeft":"scrollTop"]=r,t&&requestAnimationFrame((()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1}))}else{if(!a.support.smoothScroll)return animateCSSModeScroll({swiper:a,targetPosition:r,side:e?"left":"top"}),!0;S.scrollTo({[e?"left":"top"]:r,behavior:"smooth"})}return!0}return a.setTransition(t),a.setTranslate(h),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,i),a.transitionStart(r,E),0===t?a.transitionEnd(r,E):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(r,E))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}