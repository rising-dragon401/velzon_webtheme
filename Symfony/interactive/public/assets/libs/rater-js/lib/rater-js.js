/*! For license information please see rater-js.js.LICENSE.txt */
let css=require("./style.css");module.exports=function(e){let t=!0;if(void 0===e.element||null===e.element)throw new Error("element required");if(void 0!==e.showToolTip&&(t=!!e.showToolTip),void 0!==e.step&&(e.step<=0||e.step>1))throw new Error("step must be a number between 0 and 1");let r,n=e.element,i=e.reverse,a=e.max||5,l=e.starSize||16,s=e.step||1,o=e.onHover,u=e.onLeave,c=null;n.classList.add("star-rating");let d=document.createElement("div");d.classList.add("star-value"),i&&d.classList.add("rtl"),d.style.backgroundSize=l+"px",n.appendChild(d),n.style.width=l*a+"px",n.style.height=l+"px",n.style.backgroundSize=l+"px";let v,f,m,h=e.rateCallback,g=!!e.readOnly,b=!1,p=e.isBusyText;if(v=void 0!==e.disableText?e.disableText:"{rating}/{maxRating}",m=void 0!==e.ratingText?e.ratingText:"{rating}/{maxRating}",e.rating)T(e.rating);else{var w=n.dataset.rating;w&&T(+w)}function y(e){L(e,!1)}function L(e,r){if(!0===g||!0===b)return;let l,u=null,d=n.offsetWidth,v=n.getBoundingClientRect();if(i){u=r?e.changedTouches[0].pageX-v.left:e.pageX-window.scrollX-v.left,l=(d-u)/(d/100)}else u=r?e.changedTouches[0].pageX-v.left:e.offsetX,l=u/d*100;if(l<101){if(1===s)f=Math.ceil(l/100*a);else{let e=l/100*a;for(let t=0;;t+=s)if(t>=e){f=t;break}}if(f>a&&(f=a),n.querySelector(".star-value").style.width=f/a*100+"%",t){let e=m.replace("{rating}",f);e=e.replace("{maxRating}",a),n.setAttribute("title",e)}"function"==typeof o&&o(f,c)}}function E(e){c?(n.querySelector(".star-value").style.width=c/a*100+"%",n.setAttribute("data-rating",c)):(n.querySelector(".star-value").style.width="0%",n.removeAttribute("data-rating")),"function"==typeof u&&u(f,c)}function x(e){!0!==g&&!0!==b&&void 0!==h&&(b=!0,r=f,void 0===p?n.removeAttribute("title"):n.setAttribute("title",p),n.classList.add("is-busy"),h.call(this,r,(function(){!1===g&&n.removeAttribute("title"),b=!1,n.classList.remove("is-busy")})))}function A(){if(g=!0,n.classList.add("disabled"),t&&v){let e=v.replace("{rating}",c||0);e=e.replace("{maxRating}",a),n.setAttribute("title",e)}else n.removeAttribute("title")}function T(e){if(void 0===e)throw new Error("Value not set.");if(null===e)throw new Error("Value cannot be null.");if("number"!=typeof e)throw new Error("Value must be a number.");if(e<0||e>a)throw new Error("Value too high. Please set a rating of "+a+" or below.");c=e,n.querySelector(".star-value").style.width=e/a*100+"%",n.setAttribute("data-rating",e)}c||(n.querySelector(".star-value").style.width="0px"),g&&A(),n.addEventListener("mousemove",y),n.addEventListener("mouseleave",E);let S={setRating:T,getRating:function(){return c},disable:A,enable:function(){g=!1,n.removeAttribute("title"),n.classList.remove("disabled")},clear:function(){c=null,n.querySelector(".star-value").style.width="0px",n.removeAttribute("title")},dispose:function(){n.removeEventListener("mousemove",y),n.removeEventListener("mouseleave",E),n.removeEventListener("click",x),n.removeEventListener("touchmove",q,!1),n.removeEventListener("touchstart",R,!1),n.removeEventListener("touchend",k,!1),n.removeEventListener("touchcancel",X,!1)},get element(){return n}};function q(e){e.preventDefault(),L(e,!0)}function R(e){e.preventDefault(),L(e,!0)}function k(e){e.preventDefault(),L(e,!0),x.call(S)}function X(e){e.preventDefault(),E()}return n.addEventListener("click",x.bind(S)),n.addEventListener("touchmove",q,!1),n.addEventListener("touchstart",R,!1),n.addEventListener("touchend",k,!1),n.addEventListener("touchcancel",X,!1),S};