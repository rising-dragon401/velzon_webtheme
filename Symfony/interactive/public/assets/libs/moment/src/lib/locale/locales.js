import isArray from"../utils/is-array";import hasOwnProp from"../utils/has-own-prop";import isUndefined from"../utils/is-undefined";import compareArrays from"../utils/compare-arrays";import{deprecateSimple}from"../utils/deprecate";import{mergeConfigs}from"./set";import{Locale}from"./constructor";import keys from"../utils/keys";import{baseConfig}from"./base-config";var globalLocale,locales={},localeFamilies={};function normalizeLocale(e){return e?e.toLowerCase().replace("_","-"):e}function chooseLocale(e){for(var l,o,a,n,r=0;r<e.length;){for(l=(n=normalizeLocale(e[r]).split("-")).length,o=(o=normalizeLocale(e[r+1]))?o.split("-"):null;l>0;){if(a=loadLocale(n.slice(0,l).join("-")))return a;if(o&&o.length>=l&&compareArrays(n,o,!0)>=l-1)break;l--}r++}return globalLocale}function loadLocale(e){var l=null;if(!locales[e]&&"undefined"!=typeof module&&module&&module.exports)try{l=globalLocale._abbr,require("./locale/"+e),getSetGlobalLocale(l)}catch(e){}return locales[e]}export function getSetGlobalLocale(e,l){var o;return e&&((o=isUndefined(l)?getLocale(e):defineLocale(e,l))?globalLocale=o:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),globalLocale._abbr}export function defineLocale(e,l){if(null!==l){var o,a=baseConfig;if(l.abbr=e,null!=locales[e])deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=locales[e]._config;else if(null!=l.parentLocale)if(null!=locales[l.parentLocale])a=locales[l.parentLocale]._config;else{if(null==(o=loadLocale(l.parentLocale)))return localeFamilies[l.parentLocale]||(localeFamilies[l.parentLocale]=[]),localeFamilies[l.parentLocale].push({name:e,config:l}),null;a=o._config}return locales[e]=new Locale(mergeConfigs(a,l)),localeFamilies[e]&&localeFamilies[e].forEach((function(e){defineLocale(e.name,e.config)})),getSetGlobalLocale(e),locales[e]}return delete locales[e],null}export function updateLocale(e,l){if(null!=l){var o,a,n=baseConfig;null!=(a=loadLocale(e))&&(n=a._config),l=mergeConfigs(n,l),(o=new Locale(l)).parentLocale=locales[e],locales[e]=o,getSetGlobalLocale(e)}else null!=locales[e]&&(null!=locales[e].parentLocale?locales[e]=locales[e].parentLocale:null!=locales[e]&&delete locales[e]);return locales[e]}export function getLocale(e){var l;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return globalLocale;if(!isArray(e)){if(l=loadLocale(e))return l;e=[e]}return chooseLocale(e)}export function listLocales(){return keys(locales)}