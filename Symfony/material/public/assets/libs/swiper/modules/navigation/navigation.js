import createElementIfNotDefined from"../../shared/create-element-if-not-defined.js";export default function Navigation({swiper:a,extendParams:n,on:e,emit:i}){n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),a.navigation={nextEl:null,prevEl:null};const t=a=>(Array.isArray(a)||(a=[a].filter((a=>!!a))),a);function s(n){let e;return n&&"string"==typeof n&&a.isElement&&(e=a.el.shadowRoot.querySelector(n),e)?e:(n&&("string"==typeof n&&(e=[...document.querySelectorAll(n)]),a.params.uniqueNavElements&&"string"==typeof n&&e.length>1&&1===a.el.querySelectorAll(n).length&&(e=a.el.querySelector(n))),n&&!e?n:e)}function l(n,e){const i=a.params.navigation;(n=t(n)).forEach((n=>{n&&(n.classList[e?"add":"remove"](...i.disabledClass.split(" ")),"BUTTON"===n.tagName&&(n.disabled=e),a.params.watchOverflow&&a.enabled&&n.classList[a.isLocked?"add":"remove"](i.lockClass))}))}function o(){const{nextEl:n,prevEl:e}=a.navigation;if(a.params.loop)return l(e,!1),void l(n,!1);l(e,a.isBeginning&&!a.params.rewind),l(n,a.isEnd&&!a.params.rewind)}function r(n){n.preventDefault(),(!a.isBeginning||a.params.loop||a.params.rewind)&&(a.slidePrev(),i("navigationPrev"))}function d(n){n.preventDefault(),(!a.isEnd||a.params.loop||a.params.rewind)&&(a.slideNext(),i("navigationNext"))}function c(){const n=a.params.navigation;if(a.params.navigation=createElementIfNotDefined(a,a.originalParams.navigation,a.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!n.nextEl&&!n.prevEl)return;let e=s(n.nextEl),i=s(n.prevEl);Object.assign(a.navigation,{nextEl:e,prevEl:i}),e=t(e),i=t(i);const l=(e,i)=>{e&&e.addEventListener("click","next"===i?d:r),!a.enabled&&e&&e.classList.add(...n.lockClass.split(" "))};e.forEach((a=>l(a,"next"))),i.forEach((a=>l(a,"prev")))}function p(){let{nextEl:n,prevEl:e}=a.navigation;n=t(n),e=t(e);const i=(n,e)=>{n.removeEventListener("click","next"===e?d:r),n.classList.remove(...a.params.navigation.disabledClass.split(" "))};n.forEach((a=>i(a,"next"))),e.forEach((a=>i(a,"prev")))}e("init",(()=>{!1===a.params.navigation.enabled?v():(c(),o())})),e("toEdge fromEdge lock unlock",(()=>{o()})),e("destroy",(()=>{p()})),e("enable disable",(()=>{let{nextEl:n,prevEl:e}=a.navigation;n=t(n),e=t(e),[...n,...e].filter((a=>!!a)).forEach((n=>n.classList[a.enabled?"remove":"add"](a.params.navigation.lockClass)))})),e("click",((n,e)=>{let{nextEl:s,prevEl:l}=a.navigation;s=t(s),l=t(l);const o=e.target;if(a.params.navigation.hideOnClick&&!l.includes(o)&&!s.includes(o)){if(a.pagination&&a.params.pagination&&a.params.pagination.clickable&&(a.pagination.el===o||a.pagination.el.contains(o)))return;let n;s.length?n=s[0].classList.contains(a.params.navigation.hiddenClass):l.length&&(n=l[0].classList.contains(a.params.navigation.hiddenClass)),i(!0===n?"navigationShow":"navigationHide"),[...s,...l].filter((a=>!!a)).forEach((n=>n.classList.toggle(a.params.navigation.hiddenClass)))}}));const v=()=>{a.el.classList.add(...a.params.navigation.navigationDisabledClass.split(" ")),p()};Object.assign(a.navigation,{enable:()=>{a.el.classList.remove(...a.params.navigation.navigationDisabledClass.split(" ")),c(),o()},disable:v,update:o,init:c,destroy:p})}