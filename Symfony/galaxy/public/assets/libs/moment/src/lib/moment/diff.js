import absFloor from"../utils/abs-floor";import{cloneWithOffset}from"../units/offset";import{normalizeUnits}from"../units/aliases";export function diff(t,e,s){var i,a,r;if(!this.isValid())return NaN;if(!(i=cloneWithOffset(t,this)).isValid())return NaN;switch(a=6e4*(i.utcOffset()-this.utcOffset()),e=normalizeUnits(e)){case"year":r=monthDiff(this,i)/12;break;case"month":r=monthDiff(this,i);break;case"quarter":r=monthDiff(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-a)/864e5;break;case"week":r=(this-i-a)/6048e5;break;default:r=this-i}return s?r:absFloor(r)}function monthDiff(t,e){var s=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(s,"months");return-(s+(e-i<0?(e-i)/(i-t.clone().add(s-1,"months")):(e-i)/(t.clone().add(s+1,"months")-i)))||0}