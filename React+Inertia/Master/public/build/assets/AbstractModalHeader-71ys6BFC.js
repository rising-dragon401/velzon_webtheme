import{o as Et,c as vt,l as K}from"./listen-7k9MjBk5.js";import{u as U,c as H}from"./useWindow-W1McY3LT.js";import{r as l,j as d,I as bt}from"./app-zibdNuU4.js";import{u as Tt}from"./useMounted-pkXxvOvB.js";import{u as xt}from"./useWillUnmount-0hmT5CmW.js";import{u as Ct}from"./usePrevious-c5DQrsQW.js";import{u as h}from"./useEventCallback-peGtB_2q.js";import{u as yt,i as Mt,r as G,h as Rt}from"./hasClass-L5d4f6QE.js";import{s as g}from"./TransitionWrapper-toSH0Pc1.js";import{q as u}from"./querySelectorAll-yJiweK8j.js";import{d as kt}from"./DataKey-rVRe1FkT.js";import{C as wt}from"./CloseButton-K1fVZstf.js";function w(o){o===void 0&&(o=Et());try{var t=o.activeElement;return!t||!t.nodeName?null:t}catch{return o.body}}function Ot(o=document){const t=o.defaultView;return Math.abs(t.innerWidth-o.documentElement.clientWidth)}const V=kt("modal-open");class At{constructor({ownerDocument:t,handleContainerOverflow:e=!0,isRTL:n=!1}={}){this.handleContainerOverflow=e,this.isRTL=n,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Ot(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const e={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[n]:r.style[n]},t.scrollBarWidth&&(e[n]=`${parseInt(g(r,n)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(V,""),g(r,e)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const e=this.getElement();e.removeAttribute(V),Object.assign(e.style,t.style)}add(t){let e=this.modals.indexOf(t);return e!==-1||(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),e!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e}remove(t){const e=this.modals.indexOf(t);e!==-1&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const N=At,Nt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Bt(o,t){if(o==null)return{};var e={},n=Object.keys(o),r,a;for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&(e[r]=o[r]);return e}let O;function Lt(o){return O||(O=new N({ownerDocument:o==null?void 0:o.document})),O}function jt(o){const t=U(),e=o||Lt(t),n=l.useRef({dialog:null,backdrop:null});return Object.assign(n.current,{add:()=>e.add(n.current),remove:()=>e.remove(n.current),isTopModal:()=>e.isTopModal(n.current),setDialogRef:l.useCallback(r=>{n.current.dialog=r},[]),setBackdropRef:l.useCallback(r=>{n.current.backdrop=r},[])})}const X=l.forwardRef((o,t)=>{let{show:e=!1,role:n="dialog",className:r,style:a,children:b,backdrop:m=!0,keyboard:T=!0,onBackdropClick:B,onEscapeKeyDown:L,transition:Y,runTransition:q,backdropTransition:z,runBackdropTransition:J,autoFocus:Q=!0,enforceFocus:Z=!0,restoreFocus:tt=!0,restoreFocusOptions:et,renderDialog:j,renderBackdrop:ot=s=>d.jsx("div",Object.assign({},s)),manager:nt,container:rt,onShow:D,onHide:S=()=>{},onExit:st,onExited:W,onExiting:at,onEnter:it,onEntering:lt,onEntered:dt}=o,ct=Bt(o,Nt);const c=U(),p=yt(rt),i=jt(nt),ut=Tt(),ft=Ct(e),[x,F]=l.useState(!e),E=l.useRef(null);l.useImperativeHandle(t,()=>i,[i]),vt&&!ft&&e&&(E.current=w(c==null?void 0:c.document)),e&&x&&F(!1);const I=h(()=>{if(i.add(),M.current=K(document,"keydown",gt),y.current=K(document,"focus",()=>setTimeout(ht),!0),D&&D(),Q){var s,_;const k=w((s=(_=i.dialog)==null?void 0:_.ownerDocument)!=null?s:c==null?void 0:c.document);i.dialog&&k&&!H(i.dialog,k)&&(E.current=k,i.dialog.focus())}}),C=h(()=>{if(i.remove(),M.current==null||M.current(),y.current==null||y.current(),tt){var s;(s=E.current)==null||s.focus==null||s.focus(et),E.current=null}});l.useEffect(()=>{!e||!p||I()},[e,p,I]),l.useEffect(()=>{x&&C()},[x,C]),xt(()=>{C()});const ht=h(()=>{if(!Z||!ut()||!i.isTopModal())return;const s=w(c==null?void 0:c.document);i.dialog&&s&&!H(i.dialog,s)&&i.dialog.focus()}),mt=h(s=>{s.target===s.currentTarget&&(B==null||B(s),m===!0&&S())}),gt=h(s=>{T&&Mt(s)&&i.isTopModal()&&(L==null||L(s),s.defaultPrevented||S())}),y=l.useRef(),M=l.useRef(),pt=(...s)=>{F(!0),W==null||W(...s)};if(!p)return null;const P=Object.assign({role:n,ref:i.setDialogRef,"aria-modal":n==="dialog"?!0:void 0},ct,{style:a,className:r,tabIndex:-1});let R=j?j(P):d.jsx("div",Object.assign({},P,{children:l.cloneElement(b,{role:"document"})}));R=G(Y,q,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!e,onExit:st,onExiting:at,onExited:pt,onEnter:it,onEntering:lt,onEntered:dt,children:R});let v=null;return m&&(v=ot({ref:i.setBackdropRef,onClick:mt}),v=G(z,J,{in:!!e,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:v})),d.jsx(d.Fragment,{children:bt.createPortal(d.jsxs(d.Fragment,{children:[v,R]}),p)})});X.displayName="Modal";const Qt=Object.assign(X,{Manager:N});function Dt(o,t){o.classList?o.classList.add(t):Rt(o,t)||(typeof o.className=="string"?o.className=o.className+" "+t:o.setAttribute("class",(o.className&&o.className.baseVal||"")+" "+t))}function $(o,t){return o.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function St(o,t){o.classList?o.classList.remove(t):typeof o.className=="string"?o.className=$(o.className,t):o.setAttribute("class",$(o.className&&o.className.baseVal||"",t))}const f={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Wt extends N{adjustAndStore(t,e,n){const r=e.style[t];e.dataset[t]=r,g(e,{[t]:`${parseFloat(g(e,t))+n}px`})}restore(t,e){const n=e.dataset[t];n!==void 0&&(delete e.dataset[t],g(e,{[t]:n}))}setContainerStyle(t){super.setContainerStyle(t);const e=this.getElement();if(Dt(e,"modal-open"),!t.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";u(e,f.FIXED_CONTENT).forEach(a=>this.adjustAndStore(n,a,t.scrollBarWidth)),u(e,f.STICKY_CONTENT).forEach(a=>this.adjustAndStore(r,a,-t.scrollBarWidth)),u(e,f.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(r,a,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const e=this.getElement();St(e,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";u(e,f.FIXED_CONTENT).forEach(a=>this.restore(n,a)),u(e,f.STICKY_CONTENT).forEach(a=>this.restore(r,a)),u(e,f.NAVBAR_TOGGLER).forEach(a=>this.restore(r,a))}}let A;function Zt(o){return A||(A=new Wt(o)),A}const Ft=l.createContext({onHide(){}}),It=Ft,Pt=l.forwardRef(({closeLabel:o="Close",closeVariant:t,closeButton:e=!1,onHide:n,children:r,...a},b)=>{const m=l.useContext(It),T=h(()=>{m==null||m.onHide(),n==null||n()});return d.jsxs("div",{ref:b,...a,children:[r,e&&d.jsx(wt,{"aria-label":o,variant:t,onClick:T})]})}),te=Pt;export{te as A,Qt as B,It as M,Wt as a,Zt as g};
