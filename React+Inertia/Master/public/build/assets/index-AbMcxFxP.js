import{u as ae,r as u,c as ne,a as re,j as e,R as G,b as ie,d as le}from"./app-zibdNuU4.js";import{P as h}from"./index-D3UJIRWV.js";import{F as oe}from"./index-IDS2qx9A.js";import{u as de,c as ce,a as D,d as L,e as me}from"./index.esm-YO_6-iXy.js";import{o as pe,a as ue,b as xe,E as he,c as ve,d as $,F as ge,i as je,e as be,f as fe,g as Ne,h as ye}from"./index-8A-oJYtU.js";import{F as I}from"./index-ZZJjVfHc.js";import{B as Ee}from"./BreadCrumb-91YYkV91.js";import{D as De}from"./DeleteModal-0bhoyxG1.js";import{S as ke}from"./index-VGDmuYBL.js";import Ce from"./UpcommingEvents-wbwFo_nI.js";import"./ReactToastify-DT00DqL2.js";import"./calender-oDmisTvu.js";import{L as Se}from"./index-zeQ59Srh.js";import{C as we}from"./Container-BiQam0Lm.js";import{R as M}from"./Row-iCelYJIn.js";import{C as x}from"./Col-Ta-DAaSs.js";import{C as j}from"./Card-DDcPyCl6.js";import{M as T}from"./Modal-AyN_hV2R.js";import{F as r}from"./Form-y4TfPDBq.js";import"./isObject-_AJSPBJx.js";import"./hoist-non-react-statics.cjs-BroT11J1.js";import"./ThemeProvider-o6wCTw3b.js";import"./CardHeaderContext-ldbfLNlA.js";import"./divWithClassName-8nc4dY2_.js";import"./ltc-1lmCStrY.js";import"./dash-CNyiaMa3.js";import"./img-1-O6bbFvKB.js";import"./img-2-TmWi1535.js";import"./img-3-cOoLP6aC.js";import"./img-6-NJgHUnVB.js";import"./logo-sm-Y3NUUhw5.js";import"./logo-dark-ySeFd3Ox.js";import"./logo-light-K-Vb_kX9.js";import"./avatar-2-5h57hFen.js";import"./avatar-3-3TbFqpdQ.js";import"./avatar-5-5Vkrx5vC.js";import"./lodash-pa3Ny5xf.js";import"./createClass-4GYF5Kea.js";import"./russia-59na-oYI.js";import"./Dropdown-XH2WB3SG.js";import"./querySelectorAll-yJiweK8j.js";import"./listen-7k9MjBk5.js";import"./import-5VRc_sFL.js";import"./usePrevious-c5DQrsQW.js";import"./useForceUpdate-NB0DO_uR.js";import"./useEventCallback-peGtB_2q.js";import"./useCallbackRef-n5NLEA_u.js";import"./mergeOptionsWithPopperConfig-1ZUyq5Ue.js";import"./useMounted-pkXxvOvB.js";import"./useWindow-W1McY3LT.js";import"./NavContext-skr4YNGQ.js";import"./Button-WGDF66wU.js";import"./DataKey-rVRe1FkT.js";import"./hook-rs4oiBak.js";import"./extends-dGVwEr9R.js";import"./useMergedRefs-tGZzLewq.js";import"./Anchor-rgX-jERb.js";import"./InputGroupContext-OgYl-hUH.js";import"./NavbarContext-hqye3rRB.js";import"./Button-abcobHcU.js";import"./bitbucket-8aguTqZI.js";import"./dropbox-vdKVH9SY.js";import"./slack-wdpR1q0P.js";import"./img-1-8HOgBOll.js";import"./img-2-21TtgWvP.js";import"./img-3-Weoh5rVl.js";import"./img-6-FnhxsFLE.js";import"./img-5-clZKQOHB.js";import"./avatar-1-haSxJhOJ.js";import"./avatar-8-twQAUXGl.js";import"./avatar-6-_TQm8pNs.js";import"./Tab-Ab-x_56i.js";import"./NavItem-a0MtMYqK.js";import"./NoopTransition-i5WgIcEw.js";import"./Fade-0ChXstfx.js";import"./TransitionWrapper-toSH0Pc1.js";import"./setPrototypeOf-ahVgEFUp.js";import"./Nav-dApn-YfT.js";import"./Nav-fQpGWHwi.js";import"./NavLink-Ji2SR3_B.js";import"./Collapse--IKkzqQF.js";import"./Offcanvas-AFa7QsZc.js";import"./AbstractModalHeader-71ys6BFC.js";import"./useWillUnmount-0hmT5CmW.js";import"./hasClass-L5d4f6QE.js";import"./CloseButton-K1fVZstf.js";import"./ElementChildren-5ISuLlsJ.js";const R=()=>{const d=ae(),[n,k]=u.useState({}),[O,P]=u.useState(!1),[p,b]=u.useState(),[c,C]=u.useState(!1),[U,S]=u.useState(!0),[_,w]=u.useState(!1),[Y,H]=u.useState(""),[V,W]=u.useState(""),z=ne(t=>t.Calendar,t=>({events:t.events,categories:t.categories,isEventUpdated:t.isEventUpdated})),{events:F,categories:q,isEventUpdated:A}=re(z);u.useEffect(()=>{d(pe()),d(ue()),d(xe()),new he(document.getElementById("external-events"),{itemSelector:".external-event"})},[d]),u.useEffect(()=>{A&&(C(!1),k({}))},[d,A]);const v=()=>{O?(P(!1),k(null),C(!1),S(!0)):P(!0)},J=t=>{const a=t.date;b(a),v()},B=function(a){var i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=new Date(a),m=""+i[o.getMonth()],l=""+o.getDate(),g=o.getFullYear();return m.length<2&&(m="0"+m),l.length<2&&(l="0"+l),[l+" "+m,g].join(",")},K=t=>{const a=t.event,i=a.start,o=a.end,m=o==null?B(i):B(i)+" to "+B(o),l=o===null?[i]:[i,o];k({id:a.id,title:a.title,start:a.start,end:a.end,className:a.classNames,category:a.classNames[0],location:a._def.extendedProps.location?a._def.extendedProps.location:"No Loaction",description:a._def.extendedProps.description,defaultDate:l,datetag:m}),b(l),W(a.title),H(a.id),C(!0),S(!1),v()},Q=()=>{d(ye(Y)),w(!1)},s=de({enableReinitialize:!0,initialValues:{id:n&&n.id||"",title:n&&n.title||"",category:n&&n.category||"",location:n&&n.location||"",description:n&&n.description||"",defaultDate:n&&n.defaultDate||[],datetag:n&&n.datetag||"",start:n&&n.start||"",end:n&&n.end||""},validationSchema:ce({title:D().required("Please Enter Your Event Name"),category:D().required("Please Select Your Category"),location:D().required("Please Enter Your Location"),description:D().required("Please Enter Your Description"),start:L().required("Start Time is required"),end:L().required("End Time is required"),defaultDate:me().of(L()).required("Date range is required").min(2,"Select at least two dates")}),onSubmit:t=>{var a="";if(p&&(a=new Date(p[1]),a.setDate(a.getDate())),c){const i={id:n.id,title:t.title,className:t.category,start:p?p[0].toISOString():n.start,end:p?a.toISOString():n.end,location:t.location,description:t.description,defaultDate:[p[0].toISOString(),p[1].toISOString()]};d(ve(i)),s.resetForm()}else{const i={id:Math.floor(Math.random()*100),title:t.title,start:p[0].toISOString(),end:a.toISOString(),className:t.category,location:t.location,description:t.description,defaultDate:[p[0].toISOString(),p[1].toISOString()]};d($(i)),s.resetForm()}b(null),v()}}),X=()=>{var t,a,i,o,m,l,g,f,N,y;(t=document.getElementById("form-event"))==null||t.classList.remove("view-event"),(a=document.getElementById("event-title"))==null||a.classList.replace("d-none","d-block"),(i=document.getElementById("event-category"))==null||i.classList.replace("d-none","d-block"),((o=document.getElementById("event-start-date"))==null?void 0:o.parentNode).classList.remove("d-none"),(m=document.getElementById("event-start-date"))==null||m.classList.replace("d-none","d-block"),(l=document.getElementById("event-location"))==null||l.classList.replace("d-none","d-block"),(g=document.getElementById("event-description"))==null||g.classList.replace("d-none","d-block"),(f=document.getElementById("event-start-date-tag"))==null||f.classList.replace("d-block","d-none"),(N=document.getElementById("event-location-tag"))==null||N.classList.replace("d-block","d-none"),(y=document.getElementById("event-description-tag"))==null||y.classList.replace("d-block","d-none"),S(!0)},Z=t=>{t.preventDefault()},ee=t=>{const a=t.date,i=a.getDate(),o=a.getMonth(),m=a.getFullYear(),l=new Date,g=l.getHours(),f=l.getMinutes(),N=l.getSeconds(),y=new Date(m,o,i,g,f,N),E=t.draggedEl,te=E.className;if(E.classList.contains("external-event")&&te.indexOf("fc-event-draggable")===-1){const se={id:Math.floor(Math.random()*1e3),title:E.innerText,start:y,className:E.className};d($(se))}};return e.jsxs(G.Fragment,{children:[e.jsx(ie,{title:"Calendar | Velzon - React Admin & Dashboard Template"}),e.jsx(De,{show:_,onDeleteClick:Q,onCloseClick:()=>{w(!1)}}),e.jsx("div",{className:"page-content",children:e.jsxs(we,{fluid:!0,children:[e.jsx(Ee,{title:"Calendar",pageTitle:"Apps"}),e.jsx(M,{children:e.jsxs(x,{xs:12,children:[e.jsxs(M,{children:[e.jsxs(x,{xl:3,children:[e.jsx(j,{className:"card-h-100",children:e.jsxs(j.Body,{children:[e.jsxs("button",{className:"btn btn-primary w-100",id:"btn-new-event",onClick:v,children:[e.jsx("i",{className:"mdi mdi-plus"})," Create New Event"]}),e.jsxs("div",{id:"external-events",children:[e.jsx("br",{}),e.jsx("p",{className:"text-muted",children:"Drag and drop your event or click in the calendar"}),q&&q.map(t=>e.jsxs("div",{className:`bg-${t.type}-subtle external-event fc-event text-${t.type}`,draggable:!0,onDrag:a=>{Z(a)},children:[e.jsx("i",{className:"mdi mdi-checkbox-blank-circle font-size-11 me-2"}),t.title]},"cat-"+t.id))]})]})}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-1",children:"Upcoming Events"}),e.jsx("p",{className:"text-muted",children:"Don't miss scheduled events"}),e.jsx(ke,{className:"pe-2 me-n1 mb-3",style:{height:"400px"},children:e.jsx("div",{id:"upcoming-event-list",children:F&&(F||[]).map((t,a)=>e.jsx(G.Fragment,{children:e.jsx(Ce,{event:t})},a))})})]}),e.jsx(j,{children:e.jsx(j.Body,{className:"bg-info-subtle",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(oe,{icon:"calendar",className:"text-info icon-dual-info"})}),e.jsxs("div",{className:"flex-grow-1 ms-3",children:[e.jsx("h6",{className:"fs-15",children:"Welcome to your Calendar!"}),e.jsx("p",{className:"text-muted mb-0",children:"Event that applications book will appear here. Click on an event to see the details and manage applicants event."})]})]})})})]}),e.jsx(x,{xl:9,children:e.jsx(j,{className:"card-h-100",children:e.jsx(j.Body,{children:e.jsx(ge,{plugins:[je,be,fe,Ne],initialView:"dayGridMonth",slotDuration:"00:15:00",handleWindowResize:!0,themeSystem:"bootstrap",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,dayGridWeek,dayGridDay,listWeek"},events:F,editable:!0,droppable:!0,selectable:!0,dateClick:J,eventClick:K,drop:ee})})})})]}),e.jsx("div",{style:{clear:"both"}}),e.jsxs(T,{show:O,onHide:v,id:"event-modal",centered:!0,children:[e.jsx(T.Header,{className:"p-3 bg-info-subtle",closeButton:!0,children:e.jsx("h5",{className:"modal-title",children:c?V:"Add Event"})}),e.jsx(T.Body,{children:e.jsxs(r,{className:c?"needs-validation view-event":"needs-validation",name:"event-form",id:"form-event",onSubmit:t=>(t.preventDefault(),s.handleSubmit(),!1),children:[c?e.jsx("div",{className:"text-end",children:e.jsx(le,{href:"#",className:"btn btn-sm btn-soft-primary",id:"edit-event-btn",onClick:t=>(t.preventDefault(),X(),!1),children:"Edit"})}):null,e.jsxs("div",{className:"event-details",children:[e.jsx("div",{className:"d-flex mb-2",children:e.jsxs("div",{className:"flex-grow-1 d-flex align-items-center",children:[e.jsx("div",{className:"flex-shrink-0 me-3",children:e.jsx("i",{className:"ri-calendar-event-line text-muted fs-16"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("h6",{className:"d-block fw-semibold mb-0",id:"event-start-date-tag",children:n?n.datetag:""})})]})}),e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"flex-shrink-0 me-3",children:e.jsx("i",{className:"ri-time-line text-muted fs-16"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsxs("h6",{className:"d-block fw-semibold mb-0",children:[e.jsx("span",{id:"event-timepicker1-tag",children:"12:00 AM"})," - ",e.jsx("span",{id:"event-timepicker2-tag",children:"5:30 AM"})]})})]}),e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"flex-shrink-0 me-3",children:e.jsx("i",{className:"ri-map-pin-line text-muted fs-16"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("h6",{className:"d-block fw-semibold mb-0",children:e.jsx("span",{id:"event-location-tag",children:n&&n.location!==void 0?n.location:"No Location"})})})]}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("div",{className:"flex-shrink-0 me-3",children:e.jsx("i",{className:"ri-discuss-line text-muted fs-16"})}),e.jsx("div",{className:"flex-grow-1",children:e.jsx("p",{className:"d-block text-muted mb-0",id:"event-description-tag",children:n&&n.description!==void 0?n.description:"No Description"})})]})]}),e.jsxs(M,{className:"event-form",children:[e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(r.Label,{className:"form-label",children:"Type"}),e.jsxs("select",{className:c?"form-select d-none":"form-select d-block",name:"category",id:"event-category",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.category||"",children:[e.jsx("option",{value:"bg-danger-subtle",children:"Danger"}),e.jsx("option",{value:"bg-success-subtle",children:"Success"}),e.jsx("option",{value:"bg-primary-subtle",children:"Primary"}),e.jsx("option",{value:"bg-info-subtle",children:"Info"}),e.jsx("option",{value:"bg-dark-subtle",children:"Dark"}),e.jsx("option",{value:"bg-warning-subtle",children:"Warning"})]}),s.touched.category&&s.errors.category?e.jsx(r.Control.Feedback,{type:"invalid",className:"d-block",children:s.errors.category}):null]})}),e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(r.Label,{className:"form-label",children:"Event Name"}),e.jsx(r.Control,{className:c?"d-none":"d-block",placeholder:"Enter event name",type:"text",name:"title",id:"event-title",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.title||""}),s.touched.title&&s.errors.title?e.jsx(r.Control.Feedback,{type:"invalid",className:"d-block",children:s.errors.title}):null]})}),e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(r.Label,{children:"Event Date"}),e.jsxs("div",{className:c?"input-group d-none":"input-group",children:[e.jsx(I,{"data-enable-time":!0,className:"form-control",id:"event-start-date",name:"defaultDate",placeholder:"Select Date",value:s.values.defaultDate||"",options:{mode:"range",dateFormat:"Y-m-d"},onChange:t=>{b(t),s.setFieldValue("defaultDate",t)}}),e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"ri-calendar-event-line"})})]}),s.touched.defaultDate&&s.errors.defaultDate?e.jsxs(r.Control.Feedback,{type:"invalid",className:"d-block",children:[s.errors.defaultDate," "]}):null]})}),e.jsx(x,{xs:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(r.Label,{children:"Start Time"}),e.jsxs("div",{className:"input-group",children:[e.jsx(I,{className:"form-control",name:"start",value:s.values.start||"",onChange:t=>s.setFieldValue("start",t[0]),options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}}),e.jsxs("span",{className:"input-group-text",children:[" ",e.jsx("i",{className:"ri-calendar-event-line"})," "]})]}),s.touched.start&&s.errors.start?e.jsxs(r.Control.Feedback,{type:"invalid",className:"d-block",children:[s.errors.start," "]}):null]})}),e.jsx(x,{xs:6,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(r.Label,{children:"End Time"}),e.jsxs("div",{className:"input-group",children:[e.jsx(I,{className:"form-control input-group",name:"end",value:s.values.end||"",onChange:t=>s.setFieldValue("end",t[0]),options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}}),e.jsxs("span",{className:"input-group-text",children:[" ",e.jsx("i",{className:"ri-calendar-event-line"})," "]})]}),s.touched.end&&s.errors.end?e.jsxs(r.Control.Feedback,{type:"invalid",className:"d-block",children:[s.errors.end," "]}):null]})}),e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(r.Label,{htmlFor:"event-location",children:"Location"}),e.jsxs("div",{children:[e.jsx(r.Control,{type:"text",className:c?"d-none":"d-block",name:"location",id:"event-location",placeholder:"Event location",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.location}),s.touched.location&&s.errors.location?e.jsx(r.Control.Feedback,{type:"invalid",className:"d-block",children:s.errors.location}):null]})]})}),e.jsx(x,{xs:12,children:e.jsxs("div",{className:"mb-3",children:[e.jsx(r.Label,{className:"form-label",children:"Description"}),e.jsx("textarea",{className:c?"form-control d-none":"form-control d-block",id:"event-description",name:"description",placeholder:"Enter a description",rows:3,onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.description}),s.touched.description&&s.errors.description?e.jsx(r.Control.Feedback,{type:"invalid",className:"d-block",children:s.errors.description}):null]})})]}),e.jsxs("div",{className:"hstack gap-2 justify-content-end",children:[!!c&&e.jsxs("button",{type:"button",className:"btn btn-soft-danger",id:"btn-delete-event",onClick:()=>{v(),w(!0)},children:[e.jsx("i",{className:"ri-close-line align-bottom"})," Delete"]}),U&&e.jsx("button",{type:"submit",className:"btn btn-success",id:"btn-save-event",children:c?"Edit Event":"Add Event"})]})]})})]})]})})]})})]})};R.propTypes={events:h.any,categories:h.array,className:h.string,onGetEvents:h.func,onAddNewEvent:h.func,onUpdateEvent:h.func,onDeleteEvent:h.func,onGetCategories:h.func};R.layout=d=>e.jsx(Se,{children:d});export{R as default};
