import{c as j,o as E}from"./listen-7k9MjBk5.js";import{r as a,j as o}from"./app-zibdNuU4.js";import{u as b,a as l}from"./useWindow-W1McY3LT.js";import{u as g}from"./useMergedRefs-tGZzLewq.js";import{u as h}from"./useEventCallback-peGtB_2q.js";import{N as v}from"./NoopTransition-i5WgIcEw.js";const f=(e,t)=>j?e==null?(t||E()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function M(e,t){const i=b(),[n,r]=a.useState(()=>f(e,i==null?void 0:i.document));if(!n){const s=f(e);s&&r(s)}return a.useEffect(()=>{t&&n&&t(n)},[t,n]),a.useEffect(()=>{const s=f(e);s!==n&&r(s)},[e,n]),n}function y({in:e,onTransition:t}){const i=a.useRef(null),n=a.useRef(!0),r=h(t);return l(()=>{if(!i.current)return;let s=!1;return r({in:e,element:i.current,initial:n.current,isStale:()=>s}),()=>{s=!0}},[e,r]),l(()=>(n.current=!1,()=>{n.current=!0}),[]),i}function O({children:e,in:t,onExited:i,onEntered:n,transition:r}){const[s,c]=a.useState(!t);t&&s&&c(!1);const m=y({in:!!t,onTransition:u=>{const R=()=>{u.isStale()||(u.in?n==null||n(u.element,u.initial):(c(!0),i==null||i(u.element)))};Promise.resolve(r(u)).then(R,x=>{throw u.in||c(!0),x})}}),d=g(m,e.ref);return s&&!t?null:a.cloneElement(e,{ref:d})}function k(e,t,i){return e?o.jsx(e,Object.assign({},i)):t?o.jsx(O,Object.assign({},i,{transition:t})):o.jsx(v,Object.assign({},i))}function F(e){return e.code==="Escape"||e.keyCode===27}function L(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}export{L as h,F as i,k as r,M as u};
