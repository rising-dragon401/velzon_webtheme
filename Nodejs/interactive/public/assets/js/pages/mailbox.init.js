var url="assets/json/",allmaillist="";const loader=document.querySelector("#elmLoader");var getJSON=function(e,t){var a=new XMLHttpRequest;a.open("GET",url+e,!0),a.responseType="json",a.onload=function(){var e=a.status;200===e?(document.getElementById("elmLoader").innerHTML="",t(null,a.response)):t(e,a.response)},a.send()};function loadMailData(e){document.querySelector('#mail-filter-navlist button[data-bs-target="#pills-primary"]').click(),document.querySelector("#mail-list").innerHTML="",Array.from(e).forEach((function(e,t){var a=e.readed?"":"unread",l=e.starred?"active":"",i=e.counted?"("+e.counted+")":"";document.querySelector("#mail-list").innerHTML+='<li class="'+a+'">        <div class="col-mail col-mail-1">            <div class="form-check checkbox-wrapper-mail fs-14">                <input class="form-check-input" type="checkbox" value="'+e.id+'" id="checkbox-'+e.id+'">                <label class="form-check-label" for="checkbox-'+e.id+'"></label>            </div>            <input type="hidden" value='+e.userImg+' class="mail-userimg" />            <button type="button" class="btn avatar-xs p-0 favourite-btn fs-15 '+l+'">            <i class="ri-star-fill"></i>            </button>            <a href="javascript: void(0);" class="title"><span class="title-name">'+e.name+"</span> "+i+'</a>        </div>        <div class="col-mail col-mail-2">            <a href="javascript: void(0);" class="subject"><span class="subject-title">'+e.title+'</span> – <span class="teaser">'+e.description+'</span>            </a>            <div class="date">'+e.date+"</div>        </div>    </li>",favouriteBtn(),emailDetailShow(),emailDetailChange(),checkBoxAll()}))}function loadSocialMailData(e){Array.from(e).forEach((function(e,t){var a=e.readed?"":"unread",l=e.starred?"active":"",i=e.counted?"("+e.counted+")":"";document.getElementById("social-mail-list").innerHTML+='<li class="'+a+'">                <div class="col-mail col-mail-1">                    <div class="form-check checkbox-wrapper-mail fs-14">                        <input class="form-check-input" type="checkbox" value="'+e.id+'" id="checkbox-'+e.id+'">                        <label class="form-check-label" for="checkbox-'+e.id+'"></label>                    </div>                    <input type="hidden" value='+e.userImg+' class="mail-userimg" />                    <button type="button" class="btn avatar-xs p-0 favourite-btn fs-15 '+l+'">                    <i class="ri-star-fill"></i>                    </button>                    <a href="javascript: void(0);" class="title"><span class="title-name">'+e.name+"</span> "+i+'</a>                </div>                <div class="col-mail col-mail-2">                    <a href="javascript: void(0);" class="subject"><span class="subject-title">'+e.title+'</span> – <span class="teaser">'+e.description+'</span>                    </a>                    <div class="date">'+e.date+"</div>                </div>            </li>",emailDetailShow(),emailDetailChange(),checkBoxAll()}))}function loadPromotionsMailData(e){Array.from(e).forEach((function(e,t){var a=e.readed?"":"unread",l=e.starred?"active":"",i=e.counted?"("+e.counted+")":"";document.getElementById("promotions-mail-list").innerHTML+='<li class="'+a+'">                <div class="col-mail col-mail-1">                    <div class="form-check checkbox-wrapper-mail fs-14">                        <input class="form-check-input" type="checkbox" value="'+e.id+'" id="checkbox-'+e.id+'">                        <label class="form-check-label" for="checkbox-'+e.id+'"></label>                    </div>                    <input type="hidden" value='+e.userImg+' class="mail-userimg" />                    <button type="button" class="btn avatar-xs p-0 favourite-btn fs-15 '+l+'">                    <i class="ri-star-fill"></i>                    </button>                    <a href="javascript: void(0);" class="title"><span class="title-name">'+e.name+"</span> "+i+'</a>                </div>                <div class="col-mail col-mail-2">                    <a href="javascript: void(0);" class="subject"><span class="subject-title">'+e.title+'</span> – <span class="teaser">'+e.description+'</span>                    </a>                    <div class="date">'+e.date+"</div>                </div>            </li>",emailDetailShow(),emailDetailChange(),checkBoxAll()}))}function favouriteBtn(){Array.from(document.querySelectorAll(".favourite-btn")).forEach((function(e){e.addEventListener("click",(function(){e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")}))}))}function emailDetailShow(){var e=document.getElementsByTagName("body")[0];Array.from(document.querySelectorAll(".message-list a")).forEach((function(t){t.addEventListener("click",(function(t){e.classList.add("email-detail-show"),Array.from(document.querySelectorAll(".message-list li.unread")).forEach((function(e){e.classList.contains("unread")&&t.target.closest("li").classList.remove("unread")}))}))})),Array.from(document.querySelectorAll(".close-btn-email")).forEach((function(t){t.addEventListener("click",(function(){e.classList.remove("email-detail-show")}))}));var t=!1,a=document.getElementsByClassName("email-menu-sidebar");Array.from(document.querySelectorAll(".email-menu-btn")).forEach((function(e){e.addEventListener("click",(function(){Array.from(a).forEach((function(e){e.classList.add("menubar-show"),t=!0}))}))})),window.addEventListener("click",(function(e){document.querySelector(".email-menu-sidebar").classList.contains("menubar-show")&&(t||document.querySelector(".email-menu-sidebar").classList.remove("menubar-show"),t=!1)})),favouriteBtn()}function checkBoxAll(){Array.from(document.querySelectorAll(".checkbox-wrapper-mail input")).forEach((function(e){e.addEventListener("click",(function(e){1==e.target.checked?e.target.closest("li").classList.add("active"):e.target.closest("li").classList.remove("active")}))}));var e=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input");function t(){var e=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input"),t=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input:checked").length;Array.from(e).forEach((function(e){e.checked=!0,e.parentNode.parentNode.parentNode.classList.add("active")})),document.getElementById("email-topbar-actions").style.display=t>0?"none":"block",t>0?Array.from(e).forEach((function(e){e.checked=!1,e.parentNode.parentNode.parentNode.classList.remove("active")})):Array.from(e).forEach((function(e){e.checked=!0,e.parentNode.parentNode.parentNode.classList.add("active")})),this.onclick=a,removeItems()}function a(){var e=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input"),a=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input:checked").length;Array.from(e).forEach((function(e){e.checked=!1,e.parentNode.parentNode.parentNode.classList.remove("active")})),document.getElementById("email-topbar-actions").style.display=a>0?"none":"block",a>0?Array.from(e).forEach((function(e){e.checked=!1,e.parentNode.parentNode.parentNode.classList.remove("active")})):Array.from(e).forEach((function(e){e.checked=!0,e.parentNode.parentNode.parentNode.classList.add("active")})),this.onclick=t}Array.from(e).forEach((function(e){e.addEventListener("click",(function(e){var t=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input"),a=document.getElementById("checkall"),l=document.querySelectorAll(".tab-pane.show .checkbox-wrapper-mail input:checked").length;a.checked=l>0,a.indeterminate=l>0&&l<t.length,e.target.closest("li").classList.contains("active"),document.getElementById("email-topbar-actions").style.display=l>0?"block":"none"}))})),document.getElementById("checkall").onclick=t}getJSON("mail-list.init.json",(function(e,t){null!==e?console.log("Something went wrong: "+e):(allmaillist=t[0].primary,socialmaillist=t[0].social,promotionsmaillist=t[0].promotions,loadMailData(allmaillist),loadSocialMailData(socialmaillist),loadPromotionsMailData(promotionsmaillist))})),Array.from(document.querySelectorAll(".mail-list a")).forEach((function(e){e.addEventListener("click",(function(){var t=document.querySelector(".mail-list a.active");if(t&&t.classList.remove("active"),e.classList.add("active"),e.querySelector(".mail-list-link").hasAttribute("data-type"))var a=e.querySelector(".mail-list-link").innerHTML,l=allmaillist.filter((e=>e.labeltype===a));else{a=e.querySelector(".mail-list-link").innerHTML;if(document.getElementById("mail-list").innerHTML="","All"!=a)l=allmaillist.filter((e=>e.tabtype===a));else l=allmaillist;document.getElementById("mail-filter-navlist").style.display="All"!=a&&"Inbox"!=a?"none":"block"}loadMailData(l),favouriteBtn()}))})),favouriteBtn(),ClassicEditor.create(document.querySelector("#email-editor")).then((function(e){e.ui.view.editable.element.style.height="200px"})).catch((function(e){console.error(e)}));var currentChatId="users-chat";function scrollToBottom(e){setTimeout((()=>{new SimpleBar(document.getElementById("chat-conversation")).getScrollElement().scrollTop=document.getElementById("users-conversation").scrollHeight}),100)}function removeItems(){document.getElementById("removeItemModal").addEventListener("show.bs.modal",(function(e){document.getElementById("delete-record").addEventListener("click",(function(){Array.from(document.querySelectorAll(".message-list li")).forEach((function(e){var t,a="";if(e.classList.contains("active")){var l=e.querySelector(".form-check-input").value;a=(t=l,allmaillist.filter((function(e){return e.id!=t})));allmaillist=a,e.remove()}})),document.getElementById("btn-close").click(),document.getElementById("email-topbar-actions")&&(document.getElementById("email-topbar-actions").style.display="none"),checkall.indeterminate=!1,checkall.checked=!1}))}))}function removeSingleItem(){var e=0;document.querySelectorAll(".remove-mail").forEach((function(t){t.addEventListener("click",(function(a){e=t.getAttribute("data-remove-id"),document.getElementById("delete-record").addEventListener("click",(function(){var t,a="";t=e,a=allmaillist.filter((function(e){return e.id!=t})),loadMailData(allmaillist=a),document.getElementById("close-btn-email").click()}))}))}))}scrollToBottom(currentChatId),removeItems(),removeSingleItem();var markAllReadBtn=document.getElementById("mark-all-read");markAllReadBtn.addEventListener("click",(function(e){if(0===document.querySelectorAll(".message-list li.unread").length){document.getElementById("unreadConversations").style.display="block",setTimeout((function(){document.getElementById("unreadConversations").style.display="none"}),1e3)}Array.from(document.querySelectorAll(".message-list li.unread")).forEach((function(e){e.classList.contains("unread")&&e.classList.remove("unread")}))}));var dummyUserImage="assets/images/users/user-dummy-img.jpg",mailChatDetailElm=!1;function emailDetailChange(){Array.from(document.querySelectorAll(".message-list li")).forEach((function(e){e.addEventListener("click",(function(){var t=e.querySelector(".checkbox-wrapper-mail .form-check-input").value;document.querySelector(".remove-mail").setAttribute("data-remove-id",t);var a=e.querySelector(".subject-title").innerHTML;document.querySelector(".email-subject-title").innerHTML=a;var l=e.querySelector(".title-name").innerHTML;Array.from(document.querySelectorAll(".accordion-item.left")).forEach((function(t){t.querySelector(".email-user-name").innerHTML=l;var a=e.querySelector(".mail-userimg").value;t.querySelector("img").setAttribute("src",a)}));var i=document.querySelector(".user-name-text").innerHTML,c=document.querySelector(".header-profile-user").getAttribute("src");Array.from(document.querySelectorAll(".accordion-item.right")).forEach((function(e){e.querySelector(".email-user-name-right").innerHTML=i,e.querySelector("img").setAttribute("src",c)}))}))}))}document.querySelectorAll(".email-chat-list a").forEach((function(e){if(e.classList.contains("active")){document.getElementById("emailchat-detailElem").style.display="block";var t=document.querySelector(".email-chat-list a.active").querySelector(".chatlist-user-name").innerHTML,a=document.querySelector(".email-chat-list a.active").querySelector(".chatlist-user-image img").getAttribute("src");document.querySelector(".email-chat-detail .profile-username").innerHTML=t,document.getElementById("users-conversation").querySelectorAll(".left .chat-avatar").forEach((function(e){a?e.querySelector("img").setAttribute("src",a):e.querySelector("img").setAttribute("src",dummyUserImage)}))}e.addEventListener("click",(function(t){document.getElementById("emailchat-detailElem").style.display="block",mailChatDetailElm=!0;var a=document.querySelector(".email-chat-list a.active");a&&a.classList.remove("active"),this.classList.add("active");scrollToBottom("users-chat");var l=e.querySelector(".chatlist-user-name").innerHTML,i=e.querySelector(".chatlist-user-image img").getAttribute("src");document.querySelector(".email-chat-detail .profile-username").innerHTML=l;var c=document.getElementById("users-conversation");Array.from(c.querySelectorAll(".left .chat-avatar")).forEach((function(e){i?e.querySelector("img").setAttribute("src",i):e.querySelector("img").setAttribute("src",dummyUserImage)}))}))})),document.getElementById("emailchat-btn-close").addEventListener("click",(function(){document.getElementById("emailchat-detailElem").style.display="none",mailChatDetailElm=!1,document.querySelector(".email-chat-list a.active").classList.remove("active")}));const triggerTabList=document.querySelectorAll("#mail-filter-navlist .nav-tabs button");function resizeEvent(){if(document.documentElement.clientWidth<767){var e=document.querySelector(".email-chat-list a.active");e&&e.classList.remove("active"),document.getElementById("emailchat-detailElem").style.display="none"}}triggerTabList.forEach((e=>{const t=new bootstrap.Tab(e);e.addEventListener("click",(e=>{e.preventDefault();document.querySelector(".tab-content .tab-pane.show");t.show()}))})),resizeEvent(),window.onresize=resizeEvent;